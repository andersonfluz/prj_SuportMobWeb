@model prj_chamadosBRA.Models.Chamado
@{
    Layout = null;
    ViewBag.Title = "Triagem Informações";
}

<div class="modal-dialog" id="modalDetails">
    <div class="modal-content">
        @using (Html.BeginForm("TriagemInfo", "Chamado", null, FormMethod.Post))
        {
            @Html.HiddenFor(model => model.Id)
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Consulta do Chamado N. @Model.Id</h4>
            </div>
            <div class="modal-body">
                <div class="panel panel-default">
                    <div class="panel-heading">Dados do Chamado</div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-10">
                                @Html.Label("Assunto:")
                                @Html.DisplayFor(model => model.Assunto)
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-10">
                                @Html.Label("Abertura em:")
                                @Html.DisplayFor(model => model.DataHoraAbertura)
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-10">
                                @Html.Label("Descrição:")
                                @Html.DisplayFor(model => model.Descricao)
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-10">
                                @Html.Label("Observação:")
                                @Html.DisplayFor(model => model.Observacao)
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-10">
                                @Html.Label("Tipo do Chamado:") &nbsp;
                                @Html.RadioButtonFor(model => model.TipoChamado, "1", new { disabled = "disabled" })<label>Totvs RM</label>
                                <label>&nbsp;&nbsp;|&nbsp;&nbsp;</label>
                                @Html.RadioButtonFor(model => model.TipoChamado, "2", new { disabled = "disabled" })<label>Outros</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">Direcionamento de Chamado</div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-10">
                                @Html.Label("Responsavel:")
                                @Html.DropDownList("ddlResponsavelChamado", null, new { @class = "form-control" })
                                <div id="DropDownVal" style="color:red;" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-2">@Html.ActionLink("Assumir este chamado", "AssumirChamado", new { id = Model.Id }, new { @class = "btn btn-default" })</div>
                    <div class="col-md-4 col-md-offset-6" align="right">
                        <input type="submit" value="Direcionar Chamado" id="confirmar" name="confirmar" class="btn btn-default" />
                        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<style>
    #modalDetails .modal-content {
        overflow: auto;
    }
</style>
<script>
    $(document).ready(function () {
        //if ($('#ddlResponsavelChamado').val() == "-1") //validation on doc load
        //{
        //    $('#DropDownVal').html("Selecione um Usuario.");
        //    $('#confirmar').disabled("true");
        //}
        $('#ddlResponsavelChamado').change(function () {
            if ($('#ddlResponsavelChamado').val() == "-1") {
                $('#confirmar').attr("disable", "disable");
                $('#DropDownVal').html("Por favor, selecione um Usuario.");               
            } else if ($('#ddlResponsavelChamado').val() != "-1") {
                $('#confirmar').removeAttr("disable");
                $('#DropDownVal').html("");               
            }
        });        
    });
</script>
